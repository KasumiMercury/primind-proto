syntax = "proto3";

package device.v1;

import "buf/validate/validate.proto";

option go_package = "gen/device/v1;devicev1";

service DeviceService {
  rpc RegisterDevice(RegisterDeviceRequest) returns (RegisterDeviceResponse);
}

enum Platform {
  PLATFORM_UNSPECIFIED = 0;
  PLATFORM_WEB = 1;
  PLATFORM_ANDROID = 2;
  PLATFORM_IOS = 3;
}

message RegisterDeviceRequest {
  optional string device_id = 1 [(buf.validate.field).string.uuid = true];
  string timezone = 2 [(buf.validate.field).string.min_len = 1];
  string locale = 3 [(buf.validate.field).string.min_len = 2];
  Platform platform = 4 [(buf.validate.field).enum = {
    in: [
      1,
      2,
      3
    ]
  }];
  optional string fcm_token = 5;
  string user_agent = 6 [(buf.validate.field).string.min_len = 1];
  string accept_language = 7;
}

message RegisterDeviceResponse {
  string device_id = 1 [(buf.validate.field).string.uuid = true];
  bool is_new = 2;
}
